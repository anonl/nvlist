
configurations { natives }

android {
    buildToolsVersion '24.0.3'
    compileSdkVersion 'android-24'
    
    sourceSets {
        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            aidl.srcDirs = ['src']
            renderscript.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = [vnResDir]
            jniLibs.srcDirs = ['libs']
        }

        instrumentTest.setRoot('tests')
    }
    compileOptions {
        sourceCompatibility javaVersion
        targetCompatibility javaVersion
    }    
    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 24
        jackOptions {
           enabled true
        }            
    }
    lintOptions {
        textOutput 'stdout'
        textReport true
    }
}

/*
// Called every time Gradle gets executed: extracts natives to libs/ so they get packed with the APK.
task copyAndroidNatives() { 
    file('libs/armeabi/').mkdirs();
    file('libs/armeabi-v7a/').mkdirs();
    file('libs/x86/').mkdirs();

    configurations.natives.files.each { jar ->
        def outputDir = null
        if (jar.name.endsWith('natives-armeabi-v7a.jar')) outputDir = file('libs/armeabi-v7a')
        if (jar.name.endsWith('natives-armeabi.jar')) outputDir = file('libs/armeabi')
        if (jar.name.endsWith('natives-x86.jar')) outputDir = file('libs/x86')
        if (outputDir != null) {
            copy {
                from zipTree(jar)
                into outputDir
                include '*.so'
            }
        }
    }
}
*/